use strict;
use File::Find;

my $script = $ARGV[0] || 'findmalw';

die("File (bin/$script) not exists") unless(-f "bin/$script");

my $data;

my @lista = qw(
    lib/ThreadsPoolSafe.pm
    lib/Malware/Finder/Base.pm
    lib/Malware/Finder/PHP.pm
    lib/Malware/Finder/Config.pm
    lib/Malware/Finder.pm
);
push @lista, "bin/$script";

foreach my $file (@lista){
    open my $f, '<', $file;
    $data .= do {local $/; <$f>};
}

$data =~ s/use Malware.+//g;
$data =~ s/use ThreadsPoolSafe.+//g;
$data =~ s/use parent /use parent -norequire,/g;
print $data;
